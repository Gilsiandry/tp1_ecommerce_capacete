# ==== Datasource (PostgreSQL) ====
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/tp1_ecommerce
quarkus.datasource.username=topicos1
quarkus.datasource.password=123456

quarkus.hibernate-orm.database.generation=drop-and-create

# desabilitar o docker 
quarkus.devservices.enabled=false


quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.bind-parameters=true


# ==== JPA/Hibernate (DEV) ====
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=true

quarkus.hibernate-orm.log.bind-parameters=true

# configuracao do cors
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:4200
quarkus.http.cors.methods=GET,PUT,POST,DELETE,PATCH
quarkus.http.cors.headers=accept, authorization, content-type, x-requested-with
quarkus.http.cors.exposed-headers= *, Authorization
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# OpenAPI (Swagger)
quarkus.swagger-ui.always-include=true
quarkus.smallrye-openapi.path=/q/openapi


# Locale e encoding
quarkus.default-locale=pt-BR
quarkus.http.encoding.force-request=true
quarkus.http.encoding.force-response=true
quarkus.http.encoding.charset=UTF-8

# JSON Config
quarkus.resteasy-reactive.json.default-mapper=jackson



# Geração automática do schema (update cria ou altera tabelas sem apagar dados)
quarkus.hibernate-orm.database.generation=update

# Mostrar SQL no console
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.log.format-sql=true
quarkus.hibernate-orm.log.bind-parameters=true

# Dialeto explícito (opcional, melhora compatibilidade)
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect



# JSON (RESTEasy + Jackson)


# Usa Jackson para serializar e desserializar JSON
quarkus.resteasy-reactive.json.default-mapper=jackson

# Formatação mais legível (útil em dev)
quarkus.jackson.indent-output=true

# Ignorar campos nulos na saída JSON
quarkus.jackson.serialization-inclusion=non_null

# Datas no formato ISO (ex: 2025-10-10T14:30:00)
quarkus.jackson.write-dates-as-timestamps=false



# LOGS E MONITORAMENTO
#

# Log de nível geral
quarkus.log.level=INFO

# Logs detalhados de SQL e ORM (útil em dev)
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE

# Log de exceções de validação
quarkus.log.category."org.jboss.resteasy.reactive.server.validation".level=DEBUG



# AMBIENTE DE DESENVOLVIMENTO


# Permite hot reload com `mvn quarkus:dev`
quarkus.live-reload.instrumentation=true

# Mensagens curtas em erros REST (ValidationExceptionMapper)
quarkus.smallrye-openapi.auto-add-security=false


# TESTES


# Banco em memória para testes (opcional)
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.database.generation=create-drop

# Logs mais limpos em testes
%test.quarkus.log.level=WARN